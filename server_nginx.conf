user www-data; 
worker_processes auto; 
pid /run/nginx.pid; 
error_log /var/log/nginx/error.log warn; 
include /etc/nginx/modules-enabled/*.conf; 

events { 
    worker_connections 4096; 
    multi_accept on; 
} 

http { 
    # Basic Settings 
    sendfile on; 
    tcp_nopush on; 
    tcp_nodelay on; 
    keepalive_timeout 300; 
    types_hash_max_size 2048; 
    server_tokens off; 

    # MIME Types 
    include /etc/nginx/mime.types; 
    default_type application/octet-stream; 

    # Logging 
    access_log /var/log/nginx/access.log; 
    error_log /var/log/nginx/error.log; 

    # Gzip Compression 
    gzip on; 
    gzip_vary on; 
    gzip_proxied any; 
    gzip_comp_level 6; 
    gzip_min_length 1024; 
    gzip_types text/plain text/css text/xml text/javascript 
               application/javascript application/xml+rss application/json; 

    # Client Settings (OPTIMIZED)
    client_max_body_size 64M;      # Increased from 20M
    client_body_buffer_size 32M;   # Added to keep uploads in RAM
    client_body_timeout 300s;      # Increased from 30s
    client_header_timeout 300s;    # Increased from 30s
    send_timeout 300s;             # Increased from 30s

    # FastCGI Global Settings
    fastcgi_read_timeout 300s;
    fastcgi_send_timeout 300s;
    fastcgi_connect_timeout 300s;
    fastcgi_buffers 16 16k; 
    fastcgi_buffer_size 32k;

    # Virtual Host Configs 
    include /etc/nginx/conf.d/*.conf; 
    include /etc/nginx/sites-enabled/*; 
} 
